<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Meta tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Authlab - Responsive Metaverse Authentication Bootstrap v5 Template</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="./src/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="./src/assets/css/style.css">
    
  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;500;600;700;800&display=swap">
</head>
<body>
<div class="min-vh-100">
  <div class="bg-overlay"></div>
  <div class="container d-flex align-items-center px-5 h-screen z-1 relative">
    <div class="shadow bg-indigo-950 d-flex flex-column form-layout">

      <div class="d-flex justify-content-center mb-4">
        <a href="./index.html" class="d-flex align-items-center gap-x-1">
          <img src="./src/assets/img/logo.svg" alt="" class="w-8">
          <h1 class="text-uppercase text-white font-bold text-2xl mb-0">Authlab</h1>
        </a>
      </div>

      <h2 class="text-xl text-white text-center mb-3">Welcome Back</h2>

	<form id="loginForm">
		<div class="mb-3">
			<label for="username" class="form-label text-white">Username</label>
			<input type="text" class="form-control border-0" name="Username" id="username">
		</div>

		<div class="mb-3">
			<label for="password" class="form-label text-white">Password</label>
			<div class="relative">
				<input type="password" class="form-control pr-11 border-0" name="Password" id="password">
				<button type="button" class="btn btn-link position-absolute h-100 end-0 top-0" id="password-addon">
					<i class="mdi mdi-eye-outline f-16 text-white"></i>
				</button>
			</div>
		</div>

		<div class="mb-3 form-check">
			<input type="checkbox" class="form-check-input" id="exampleCheck">
			<label class="form-check-label text-white" for="exampleCheck">Remember me</label>
		</div>

		<div class="text-center mt-3">
			<button type="submit" class="btn btn-primary w-full">Log In</button>
		</div>

		<div class="d-flex align-items-center justify-content-between gap-x-4 mt-4">
			<div class="d-flex align-items-center gap-x-4">
				<p class="text-sm mb-0 text-white">Don't have an account?</p>
				<a href="sign-up.html" class="text-sm no-underline text-cyan-400 hover:text-cyan-500">
					Sign up
				</a>
			</div>
			<a href="forgot-password.html" class="text-sm no-underline text-cyan-400 hover:text-cyan-500">
				Forgot Password?
			</a>
		</div>
	</form>

    </div>
  </div>
</div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.getElementById('loginForm');

            loginForm.addEventListener('submit', async function (event) {
                event.preventDefault(); // Отменяем стандартную отправку формы

                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;

                try {
                    const response = await fetch('https://localhost:7080/api/signin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            username: username,
                            password: password
                        })
                    });

                    const result = await response.json();

                    if (response.ok) {
                        alert('Успешная авторизация!');
                        //location.href = '/dashboard'; // Переход на страницу dashboard после успешной авторизации
                    } else {
                        alert(result.message); // Сообщение об ошибке от сервера
                    }

                } catch (error) {
                    console.error('Ошибка:', error);
                    alert('Произошла ошибка при попытке авторизоваться.');
                }
            });
        });
    </script>
<script src="./src/assets/js/bootstrap.bundle.min.js"></script>
<script src="./src/assets/js/index.js"></script>
</body>
</html>